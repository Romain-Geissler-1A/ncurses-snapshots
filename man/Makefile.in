# Makefile for ncurses manual pages.

SHELL		= /bin/sh

srcdir		= @srcdir@
VPATH		= @srcdir@
prefix		= @prefix@
exec_prefix	= @exec_prefix@
datadir		= @datadir@
mandir		= $(prefix)/man

INSTALL		= @INSTALL@
INSTALL_DATA	= @INSTALL_DATA@

all:

install install.man : terminfo.5
	$(srcdir)/../mkinstalldirs $(mandir)
	@cd $(srcdir); for i in *.[0-9]*; do \
		if [ ! -d $(mandir)/man$${section} ]; then $(srcdir)/../mkinstalldirs $(mandir)/man$$section]; fi; \
		section=`expr "$$i" : '.*\\.\\([0-9]\\)[xm]*'`; \
		sed -e 's,@TERMINFO@,$(datadir),' < $$i >/tmp/man.tmp; \
		echo installing man page $$i;\
		$(INSTALL_DATA) /tmp/man.tmp $(mandir)/man$${section}/$$i; \
	done 
	rm -f /tmp/man.tmp

# We compose terminfo.5 from the real sources...
CAPLIST=$(srcdir)/../include/Caps
terminfo.5: terminfo.head $(CAPLIST) terminfo.tail Makefile MKterminfo.sh
	sh MKterminfo.sh terminfo.head $(CAPLIST) terminfo.tail >terminfo.5

clean mostlyclean:
	rm -f terminfo.5

distclean realclean: clean
	rm -f Makefile
